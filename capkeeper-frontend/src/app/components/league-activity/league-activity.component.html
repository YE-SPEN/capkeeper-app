<div class="flex items-center justify-between flex-column md:flex-row py-4 bg-white dark:bg-gray-900">
    <div class="w-full">
        <!-- Control Panel -->
        <ul class="flex flex-row items-center flex-nowrap space-x-4 py-4">
            <!-- Search Bar -->
            <li class="flex items-center justify-center md:justify-start">
                <h1 class="font-bold text-2xl">
                    Recent Activity
                </h1>
            </li>

            <!-- Action Filter -->
            <li class="flex items-center justify-center md:justify-start">
                <select (ngModelChange)="getActivitiesByDate()" class="bg-gray-50 border border-green-400 text-gray-900 text-sm rounded-lg focus:ring-green-400 focus:border-green-400 block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-green-400 dark:focus:border-green-400 min-w-[140px]">         
                    <option value="7">All Types</option>
                    <option value="30">Free Agent Adds</option>
                    <option value="90">Player Drops</option>
                    <option value="365">Trades</option>
                    <option value="365">Database Updates</option>
                    <option value="365">Player Added to Database</option>          
                </select> 
            </li>

            <!-- Date Filter -->
            <li class="flex items-center justify-end md:justify-start">
                <select (ngModelChange)="getActivitiesByDate()" class="bg-gray-50 border border-green-400 text-gray-900 text-sm rounded-lg focus:ring-green-400 focus:border-green-400 block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-green-400 dark:focus:border-green-400 min-w-[140px]">         
                    <option value="7">This Week</option>
                    <option value="30">Last 30 days</option>
                    <option value="90">Last 3 months</option>
                    <option value="365">Last 12 months</option>          
                </select>         
            </li>

            <!-- Custom Date Range -->
            <li class="flex items-center justify-end md:justify-end">    
                <div id="date-range-picker" date-rangepicker class="flex items-center">
                    <div class="relative">
                        <div class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none">
                            <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"/>
                            </svg>
                        </div>
                        <input id="datepicker-range-start" name="start" type="text" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full ps-10 p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Select date start">
                    </div>
                    <span class="mx-4 text-gray-500">to</span>
                    <div class="relative">
                        <div class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none">
                            <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"/>
                            </svg>
                        </div>
                        <input id="datepicker-range-end" name="end" type="text" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full ps-10 p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Select date end">
                    </div>
                </div>
            </li>
        </ul>         
    </div>
</div>


    <div class="overflow-x-auto mb-4 rounded m:rounded-lg shadow-md border-2 max-h-[800px]">
        <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
          <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
            <tr class="border-b-2 sticky top-0">
                <th scope="col" class="p-4 bg-gray-50 dark:bg-gray-700">
                    
                </th>
                <th scope="col" class="text-left p-4 bg-gray-50 dark:bg-gray-700">
                    Description
                </th>
                <th scope="col" class="text-left p-4 bg-gray-50 dark:bg-gray-700">
                    Type
                </th>
                <th scope="col" 
                   class="p-4 bg-gray-50 dark:bg-gray-700 hover:text-gray-500 hover:cursor-pointer"
                   [ngClass]="{'text-green-400 hover:text-green-600': sortingService.sortColumn === 'user_id'}"
                   (click)="sortingService.toggleSort(activity_log, 'user_id')"
                >
                   <span class="flex items-center">
                      User
                      <svg class="w-4 h-4 ms-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                         <path *ngIf="sortingService.sortColumn !== 'user_id'" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m8 15 4 4 4-4m0-6-4-4-4 4"/>
                         <path *ngIf="sortingService.sortColumn === 'user_id' && sortingService.sortDirection === 'desc'" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 9-7 7-7-7"/>
                         <path *ngIf="sortingService.sortColumn === 'user_id' && sortingService.sortDirection === 'asc'" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m5 15 7-7 7 7"/>   
                      </svg>
                   </span>
                </th>
                <th scope="col" 
                   class="p-4 bg-gray-50 dark:bg-gray-700 hover:text-gray-500 hover:cursor-pointer"
                   [ngClass]="{'text-green-400 hover:text-green-600': sortingService.sortColumn === 'date'}"
                   (click)="sortingService.toggleSort(activity_log, 'date')"
                >
                   <span class="flex items-center">
                      Date
                      <svg class="w-4 h-4 ms-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                         <path *ngIf="sortingService.sortColumn !== 'date'" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m8 15 4 4 4-4m0-6-4-4-4 4"/>
                         <path *ngIf="sortingService.sortColumn === 'date' && sortingService.sortDirection === 'desc'" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 9-7 7-7-7"/>
                         <path *ngIf="sortingService.sortColumn === 'date' && sortingService.sortDirection === 'asc'" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m5 15 7-7 7 7"/>   
                      </svg>
                   </span>
                </th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let activity of activity_log" class="border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
 
                <td class="p-4 dark:bg-gray-800">
                    <div class="flex items-center">
                        <svg class="w-6 h-6 text-green-400 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path *ngIf="activity.action_type === 'add-player'" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 7.757v8.486M7.757 12h8.486M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/>
                            <path *ngIf="activity.action_type === 'drop-player'" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7.757 12h8.486M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/>
                            <path *ngIf="activity.action_type === 'create-player'" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12h4m-2 2v-4M4 18v-1a3 3 0 0 1 3-3h4a3 3 0 0 1 3 3v1a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1Zm8-10a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"/>
                            <path *ngIf="activity.action_type === 'edit-player'" stroke="currentColor" stroke-linecap="square" stroke-linejoin="round" stroke-width="2" d="M7 19H5a1 1 0 0 1-1-1v-1a3 3 0 0 1 3-3h1m4-6a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm7.441 1.559a1.907 1.907 0 0 1 0 2.698l-6.069 6.069L10 19l.674-3.372 6.07-6.07a1.907 1.907 0 0 1 2.697 0Z"/>
                              
                        </svg>        
                    </div>
                </td>            

                <td class="flex items-left px-2 py-2 min-w-52 text-gray-900 whitespace-nowrap dark:text-white dark:bg-gray-800">
                    <div class="flex items-center text-md font-semibold text-gray-900 dark:text-white align-middle">
                        {{ activity.message }} <span class="bg-green-100 text-green-800 text-[9px] font-medium ml-2 me-2 px-1.5 py-0.5 rounded dark:bg-gray-700 dark:text-green-400 border border-green-400">New</span>
                    </div>
                </td>
                <td class="px-6 py-4">
                    {{ activity.action_type }}
                </td>
                <td class="px-6 py-4">
                    {{ getUser(activity.user_id) }}
                </td>
                <td class="px-6 py-4">
                    {{ formatDateTime(activity.date, activity.time) }}
                </td>
            </tr>
          </tbody>
        </table>
      </div>


